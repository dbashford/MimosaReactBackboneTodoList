define(["react","./utils","./todo-item","./todo-footer"],function(t,e,o,n){var i={componentDidMount:function(){this.getBackboneModels().forEach(function(t){t.on("add change remove",this.forceUpdate.bind(this,null),this)},this)},componentWillUnmount:function(){this.getBackboneModels().forEach(function(t){t.off(null,null,this)},this)}},d=t.createClass({displayName:"TodoApp",mixins:[i],getInitialState:function(){return{editing:null}},componentDidMount:function(){this.props.todos.fetch(),this.refs.newField.getDOMNode().focus()},componentDidUpdate:function(){this.props.todos.forEach(function(t){t.save()})},getBackboneModels:function(){return[this.props.todos]},handleSubmit:function(t){t.preventDefault();var e=this.refs.newField.getDOMNode().value.trim();e&&(this.props.todos.create({title:e,completed:!1,order:this.props.todos.nextOrder()}),this.refs.newField.getDOMNode().value="")},toggleAll:function(t){var e=t.nativeEvent.target.checked;this.props.todos.forEach(function(t){t.set("completed",e)})},edit:function(t){this.setState({editing:t.get("id")})},save:function(t,e){t.set("title",e),this.setState({editing:null})},clearCompleted:function(){this.props.todos.completed().forEach(function(t){t.destroy()})},render:function(){var e=null,i=null,d=this.props.todos.map(function(t){return o({key:t.cid,todo:t,onToggle:t.toggle.bind(t),onDestroy:t.destroy.bind(t),onEdit:this.edit.bind(this,t),editing:this.state.editing===t.get("id"),onSave:this.save.bind(this,t)})},this),r=this.props.todos.remaining().length,s=d.length-r;return(r||s)&&(e=n({count:r,completedCount:s,onClearCompleted:this.clearCompleted})),d.length&&(i=t.DOM.section({id:"main"},t.DOM.input({id:"toggle-all",type:"checkbox",onChange:this.toggleAll}),t.DOM.ul({id:"todo-list"},d))),t.DOM.div(null,t.DOM.section({id:"todoapp"},t.DOM.header({id:"header"},t.DOM.h1(null,"todos"),t.DOM.form({onSubmit:this.handleSubmit},t.DOM.input({ref:"newField",id:"new-todo",placeholder:"What needs to be done?"}))),i,e),t.DOM.footer({id:"info"},t.DOM.p(null,"Double-click to edit a todo"),t.DOM.p(null,"Created by"," ",t.DOM.a({href:"http://github.com/petehunt/"},"petehunt")),t.DOM.p(null,"Mimosa, Bower and RequireJS added by"," ",t.DOM.a({href:"http://github.com/dbashford/"},"dbashford"))))}});return d});
/*
//@ sourceMappingURL=app.js.map
*/
